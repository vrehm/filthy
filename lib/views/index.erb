<style type="text/css">
    /* Start by setting display:none to make this hidden.
     Then we position it in relation to the viewport window
     with position:fixed. Width, height, top and left speak
     for themselves. Background we set to 80% white with
     our animation centered, and no-repeating */
  .modal {
      display:    none;
      position:   fixed;
      z-index:    1000;
      top:        0;
      left:       0;
      height:     100%;
      width:      100%;
      background: rgba( 255, 255, 255, .8 ) 
                  url('http://i.stack.imgur.com/FhHRx.gif') 
                  50% 50% 
                  no-repeat;
  }

  /* When the body has the loading class, we turn
     the scrollbar off with overflow:hidden */
  body.loading {
      overflow: hidden;   
  }

  /* Anytime the body has the loading class, our
     modal element will be visible */
  body.loading .modal {
      display: block;
  }
</style>


<body>
  <header> <h1>Filthy</h1> </header>
  <aside>
    <ul>
      <h2> Main Collections </h2>
      <% @collections.each do |x| %>
        <li>
          <button data-id="<%=x.id%>" class="btn col-button">Load: <%=x.title%></button>
        </li>
      <% end %>
    </ul>
  </aside>
  <main>
      

  </main>
  <div class="modal"><!-- Place at bottom of page --></div>
  <footer>
    
  </footer>
</body>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

<script type="text/javascript">

  $( document ).ready(function(){

    var $element = $('.col-button'),
        $body = $("body");

    $(document).on({
        ajaxStart: function() { $body.addClass("loading");    },
        ajaxStop: function() { $body.removeClass("loading");  }    
    });

    $element.on('click', function() { 
      var id = $(this).data('id'); 

      $.ajax({
        type: 'GET',
        data: 'json',
        url: "/collections/:"+id,
        dataType: 'JSON',
        success: function(data) {
          console.log(data);
        }
      });

    });    
  })



</script>

